"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[7021],{37021:function(e,a,n){n.r(a);var t=n(93433),r=n(29439),i=n(1413),o=n(72791),l=n(60364),c=n(51691),s=n(20890),d=n(36151),u=n(61889),_=n(11135),m=n(25787),p=n(20165),v=n(3579),h=n(23814),f=n(84741),Z=n(40968),x=n(3923),D=n(87995),g=n(81551),I=n(72401),j=n(83679),N=n(21435),S=n(37516),b=n(2148),k=n(81207),R=n(80184),y=(0,l.$j)((function(e){return{loadingTenant:e.tenants.loadingTenant,selectedTenant:e.tenants.currentTenant,tenant:e.tenants.tenantInfo}}),null);a.default=(0,m.Z)((function(e){return(0,_.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},h.oZ),h.bK),{},{loaderAlign:{textAlign:"center"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},(0,h.Bz)(e.spacing(4))),h.QV),h.DF),h.oO),h.AK))}))(y((function(e){var a=e.classes,n=(0,g.TL)(),i=(0,l.v9)((function(e){return e.tenants.tenantInfo})),_=(0,l.v9)((function(e){return e.tenants.loadingTenant})),m=(0,o.useState)(!1),h=(0,r.Z)(m,2),y=h[0],C=h[1],w=(0,o.useState)(!1),F=(0,r.Z)(w,2),A=F[0],L=F[1],P=(0,o.useState)("Built-in"),O=(0,r.Z)(P,2),T=O[0],U=O[1],B=(0,o.useState)(""),q=(0,r.Z)(B,2),K=q[0],z=q[1],G=(0,o.useState)(""),M=(0,r.Z)(G,2),E=M[0],V=M[1],W=(0,o.useState)(""),Q=(0,r.Z)(W,2),$=Q[0],H=Q[1],J=(0,o.useState)(!1),X=(0,r.Z)(J,2),Y=X[0],ee=X[1],ae=(0,o.useState)(""),ne=(0,r.Z)(ae,2),te=ne[0],re=ne[1],ie=(0,o.useState)(""),oe=(0,r.Z)(ie,2),le=oe[0],ce=oe[1],se=(0,o.useState)(""),de=(0,r.Z)(se,2),ue=de[0],_e=de[1],me=(0,o.useState)(""),pe=(0,r.Z)(me,2),ve=pe[0],he=pe[1],fe=(0,o.useState)(""),Ze=(0,r.Z)(fe,2),xe=Ze[0],De=Ze[1],ge=(0,o.useState)(""),Ie=(0,r.Z)(ge,2),je=Ie[0],Ne=Ie[1],Se=(0,o.useState)(!1),be=(0,r.Z)(Se,2),ke=be[0],Re=be[1],ye=(0,o.useState)(""),Ce=(0,r.Z)(ye,2),we=Ce[0],Fe=Ce[1],Ae=(0,o.useState)(""),Le=(0,r.Z)(Ae,2),Pe=Le[0],Oe=Le[1],Te=(0,o.useState)(""),Ue=(0,r.Z)(Te,2),Be=Ue[0],qe=Ue[1],Ke=(0,o.useState)(""),ze=(0,r.Z)(Ke,2),Ge=ze[0],Me=ze[1],Ee=(0,o.useState)(!1),Ve=(0,r.Z)(Ee,2),We=Ve[0],Qe=Ve[1],$e=(0,o.useState)(!1),He=(0,r.Z)($e,2),Je=He[0],Xe=He[1],Ye=(0,o.useState)(!1),ea=(0,r.Z)(Ye,2),aa=ea[0],na=ea[1],ta=(0,o.useState)({}),ra=(0,r.Z)(ta,2),ia=ra[0],oa=ra[1],la=function(e){oa((0,f.h)(ia,e))},ca=(0,o.useState)(!1),sa=(0,r.Z)(ca,2),da=sa[0],ua=sa[1];(0,o.useEffect)((function(){var e=[];"OpenID"===T&&(e=[].concat((0,t.Z)(e),[{fieldKey:"openID_CONFIGURATION_URL",required:!0,value:K},{fieldKey:"openID_clientID",required:!0,value:E},{fieldKey:"openID_secretID",required:!0,value:$},{fieldKey:"openID_claimName",required:!0,value:le}])),"AD"===T&&(e=[].concat((0,t.Z)(e),[{fieldKey:"AD_URL",required:!0,value:ve},{fieldKey:"ad_lookupBindDN",required:!0,value:xe}]));var a=(0,Z.R)(e);ua(0===Object.keys(a).length),oa(a)}),[T,K,E,$,le,ve,xe]);var _a=(0,o.useCallback)((function(){k.Z.invoke("GET","/api/v1/namespaces/".concat(null===i||void 0===i?void 0:i.namespace,"/tenants/").concat(null===i||void 0===i?void 0:i.name,"/identity-provider")).then((function(e){e&&(e.oidc?(U("OpenID"),z(e.oidc.configuration_url),V(e.oidc.client_id),H(e.oidc.secret_id),re(e.oidc.callback_url),ce(e.oidc.claim_name),_e(e.oidc.scopes)):e.active_directory&&(U("AD"),he(e.active_directory.url),De(e.active_directory.lookup_bind_dn),Ne(e.active_directory.lookup_bind_password),Fe(e.active_directory.user_dn_search_base_dn),Oe(e.active_directory.user_dn_search_filter),qe(e.active_directory.group_search_base_dn),Me(e.active_directory.group_search_filter),Qe(e.active_directory.skip_tls_verification),Xe(e.active_directory.server_insecure),na(e.active_directory.server_start_tls)))})).catch((function(e){n((0,D.Ih)(e))}))}),[i,n]);(0,o.useEffect)((function(){i&&_a()}),[i,_a]);return(0,R.jsxs)(o.Fragment,{children:[(0,R.jsx)(b.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,R.jsx)(x.EjK,{}),isLoading:y,onClose:function(){return L(!1)},isOpen:A,onConfirm:function(){C(!0);var e={};switch(T){case"AD":e.active_directory={url:ve,lookup_bind_dn:xe,lookup_bind_password:je,user_dn_search_base_dn:we,user_dn_search_filter:Pe,group_search_base_dn:Be,group_search_filter:Ge,skip_tls_verification:We,server_insecure:Je,server_start_tls:aa};break;case"OpenID":e.oidc={configuration_url:K,client_id:E,secret_id:$,callback_url:te,claim_name:le,scopes:ue}}k.Z.invoke("POST","/api/v1/namespaces/".concat(null===i||void 0===i?void 0:i.namespace,"/tenants/").concat(null===i||void 0===i?void 0:i.name,"/identity-provider"),e).then((function(){C(!1),L(!1),_a()})).catch((function(e){n((0,D.Ih)(e)),C(!1)}))},confirmationContent:(0,R.jsx)(c.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),_?(0,R.jsx)("div",{className:a.loaderAlign,children:(0,R.jsx)(I.Z,{})}):(0,R.jsxs)(o.Fragment,{children:[(0,R.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,R.jsx)("h1",{className:a.sectionTitle,children:"Identity Provider"}),(0,R.jsx)("hr",{className:a.hrClass})]}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.protocolRadioOptions,children:(0,R.jsx)(j.Z,{currentSelection:T,id:"idp-options",name:"idp-options",label:"Protocol",onChange:function(e){U(e.target.value)},selectorOptions:[{label:"Built-in",value:"Built-in"},{label:"OpenID",value:"OpenID"},{label:"Active Directory",value:"AD"}]})}),"OpenID"===T&&(0,R.jsxs)(o.Fragment,{children:[(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"openID_CONFIGURATION_URL",name:"openID_CONFIGURATION_URL",onChange:function(e){z(e.target.value),la("openID_CONFIGURATION_URL")},label:"Configuration URL",value:K,placeholder:"https://your-identity-provider.com/.well-known/openid-configuration",error:ia.openID_CONFIGURATION_URL||"",required:!0})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"openID_clientID",name:"openID_clientID",onChange:function(e){V(e.target.value),la("openID_clientID")},label:"Client ID",value:E,error:ia.openID_clientID||"",required:!0})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{type:Y?"text":"password",id:"openID_secretID",name:"openID_secretID",onChange:function(e){H(e.target.value),la("openID_secretID")},label:"Secret ID",value:$,error:ia.openID_secretID||"",required:!0,overlayIcon:Y?(0,R.jsx)(p.Z,{}):(0,R.jsx)(v.Z,{}),overlayAction:function(){return ee(!Y)}})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"openID_callbackURL",name:"openID_callbackURL",onChange:function(e){re(e.target.value),la("openID_callbackURL")},label:"Callback URL",value:te,placeholder:"https://your-console-endpoint:9443/oauth_callback",error:ia.openID_callbackURL||""})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"openID_claimName",name:"openID_claimName",onChange:function(e){ce(e.target.value),la("openID_claimName")},label:"Claim Name",value:le,error:ia.openID_claimName||"",required:!0})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"openID_scopes",name:"openID_scopes",onChange:function(e){_e(e.target.value),la("openID_scopes")},label:"Scopes",value:ue})})]}),"AD"===T&&(0,R.jsxs)(o.Fragment,{children:[(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"AD_URL",name:"AD_URL",onChange:function(e){he(e.target.value),la("AD_URL")},label:"LDAP Server Address",value:ve,placeholder:"ldap-server:636",error:ia.AD_URL||"",required:!0})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(S.Z,{value:"ad_skipTLS",id:"ad_skipTLS",name:"ad_skipTLS",checked:We,onChange:function(e){var a=e.target.checked;Qe(a)},label:"Skip TLS Verification"})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(S.Z,{value:"ad_serverInsecure",id:"ad_serverInsecure",name:"ad_serverInsecure",checked:Je,onChange:function(e){var a=e.target.checked;Xe(a)},label:"Server Insecure"})}),Je?(0,R.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,R.jsx)(s.Z,{className:a.error,variant:"caption",display:"block",gutterBottom:!0,children:"Warning: All traffic with Active Directory will be unencrypted"}),(0,R.jsx)("br",{})]}):null,(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(S.Z,{value:"ad_serverStartTLS",id:"ad_serverStartTLS",name:"ad_serverStartTLS",checked:aa,onChange:function(e){var a=e.target.checked;na(a)},label:"Start TLS connection to AD/LDAP server"})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"ad_lookupBindDN",name:"ad_lookupBindDN",onChange:function(e){De(e.target.value),la("ad_lookupBindDN")},label:"Lookup Bind DN",value:xe,placeholder:"cn=admin,dc=min,dc=io",error:ia.ad_lookupBindDN||"",required:!0})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{type:ke?"text":"password",id:"ad_lookupBindPassword",name:"ad_lookupBindPassword",onChange:function(e){Ne(e.target.value)},label:"Lookup Bind Password",value:je,placeholder:"admin",overlayIcon:ke?(0,R.jsx)(p.Z,{}):(0,R.jsx)(v.Z,{}),overlayAction:function(){return Re(!ke)}})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"ad_userDNSearchBaseDN",name:"ad_userDNSearchBaseDN",onChange:function(e){Fe(e.target.value)},label:"User DN Search Base DN",value:we,placeholder:"dc=min,dc=io"})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"ad_userDNSearchFilter",name:"ad_userDNSearchFilter",onChange:function(e){Oe(e.target.value)},label:"User DN Search Filter",value:Pe,placeholder:"(sAMAcountName=%s)"})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"ad_groupSearchBaseDN",name:"ad_groupSearchBaseDN",onChange:function(e){qe(e.target.value)},label:"Group Search Base DN",value:Be,placeholder:"ou=hwengg,dc=min,dc=io;ou=swengg,dc=min,dc=io"})}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.formFieldRow,children:(0,R.jsx)(N.Z,{id:"ad_groupSearchFilter",name:"ad_groupSearchFilter",onChange:function(e){Me(e.target.value)},label:"Group Search Filter",value:Ge,placeholder:"(&(objectclass=groupOfNames)(member=%s))"})})]}),(0,R.jsx)(u.ZP,{item:!0,xs:12,className:a.buttonContainer,children:(0,R.jsx)(d.Z,{type:"submit",variant:"contained",color:"primary",disabled:!da||y,onClick:function(){return L(!0)},children:"Save"})})]})]})})))},3579:function(e,a,n){var t=n(95318);a.Z=void 0;var r=t(n(45649)),i=n(80184),o=(0,r.default)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");a.Z=o},20165:function(e,a,n){var t=n(95318);a.Z=void 0;var r=t(n(45649)),i=n(80184),o=(0,r.default)((0,i.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");a.Z=o}}]);
//# sourceMappingURL=7021.6d31f973.chunk.js.map