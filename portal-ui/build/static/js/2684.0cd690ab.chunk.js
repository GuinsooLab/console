"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2684],{54639:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(29439),a=n(1413),r=n(72791),c=n(26181),s=n.n(c),o=n(61889),l=n(30829),d=n(20068),u=n(13400),m=n(99663),f=n(86711),x=n(11135),h=n(25787),p=n(23814),Z=n(84570),j=n(22512),v=n(80184),g=(0,h.Z)((function(e){return(0,x.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},p.YI),p.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},p.bV),{},{inputLabel:(0,a.Z)((0,a.Z)({},p.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,a.Z)((0,a.Z)({},p.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var t=e.label,n=e.classes,a=e.onChange,c=e.id,x=e.name,h=e.disabled,p=void 0!==h&&h,g=e.tooltip,C=void 0===g?"":g,b=e.required,y=e.error,k=void 0===y?"":y,I=e.accept,w=void 0===I?"":I,P=e.value,S=void 0===P?"":P,A=(0,r.useState)(!1),N=(0,i.Z)(A,2),T=N[0],B=N[1];return(0,v.jsx)(r.Fragment,{children:(0,v.jsxs)(o.ZP,{item:!0,xs:12,className:"".concat(n.fileInputField," ").concat(n.fieldBottom," ").concat(n.fieldContainer," ").concat(""!==k?n.errorInField:""),children:[""!==t&&(0,v.jsxs)(l.Z,{htmlFor:c,className:"".concat(""!==k?n.fieldLabelError:""," ").concat(n.inputLabel),children:[(0,v.jsxs)("span",{children:[t,b?"*":""]}),""!==C&&(0,v.jsx)("div",{className:n.tooltipContainer,children:(0,v.jsx)(d.Z,{title:C,placement:"top-start",children:(0,v.jsx)("div",{className:n.tooltip,children:(0,v.jsx)(Z.Z,{})})})})]}),T||""===S?(0,v.jsxs)("div",{className:n.textBoxContainer,children:[(0,v.jsx)("input",{type:"file",name:x,onChange:function(e){var t=s()(e,"target.files[0].name","");!function(e,t){var n=e.target.files[0],i=new FileReader;i.readAsDataURL(n),i.onload=function(){var e=i.result;if(e){var n=e.toString().split("base64,");2===n.length&&t(n[1])}}}(e,(function(e){a(e,t)}))},accept:w,required:b,disabled:p,className:n.fileInputField}),""!==S&&(0,v.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){B(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(f.Z,{})}),""!==k&&(0,v.jsx)(j.Z,{errorMessage:k})]}):(0,v.jsxs)("div",{className:n.fileReselect,children:[(0,v.jsx)("div",{className:n.valueString,children:S}),(0,v.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){B(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(m.Z,{})})]})]})})}))},98952:function(e,t,n){n.d(t,{Z:function(){return b}});n(72791);var i=n(11135),a=n(25787),r=n(90983),c=n(81918),s=n(91614),o=n(61889),l=n(20890),d=n(64554),u=n(94721),m=n(90493),f=n(15021),x=n(20653),h=n(49900),p=n(52502),Z=n(46431),j=n.n(Z),v=n(1413),g=n(80184),C=function(e){return(0,g.jsxs)("svg",(0,v.Z)((0,v.Z)({xmlns:"http://www.w3.org/2000/svg",className:"min-icon",fill:"currentcolor",viewBox:"0 0 256 256"},e),{},{children:[(0,g.jsx)("defs",{children:(0,g.jsx)("clipPath",{id:"certificate_svg__a",children:(0,g.jsx)("path",{"data-name":"Rect\\xE1ngulo 2156",fill:"#07193e",d:"M0 0h256v222.048H0z"})})}),(0,g.jsxs)("g",{"data-name":"Grupo 4763",transform:"translate(0 17)",clipPath:"url(#certificate_svg__a)",fill:"#07193e",children:[(0,g.jsx)("path",{"data-name":"Trazado 8152",d:"M240-.002H16a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h120l4.64-5.6 7.44-9.12A66.72 66.72 0 0 1 256 98.958v-82.96a16 16 0 0 0-16-16m-130.96 149.7H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 1 1 0 14.592m0-56H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 0 1 0 14.592m66.96-39.3a6.419 6.419 0 0 1-6.4 6.4H46.4a6.419 6.419 0 0 1-6.4-6.4v-1.792a6.419 6.419 0 0 1 6.4-6.4h123.2a6.419 6.419 0 0 1 6.4 6.4Z"}),(0,g.jsx)("path",{"data-name":"Trazado 8153",d:"M256 137.486a50.96 50.96 0 1 0-86.16 36.72l-15.52 18.96 7.2 28.88 29.28-35.68a50.018 50.018 0 0 0 28.4 0l29.28 35.68 7.2-28.88-15.52-18.96a50.75 50.75 0 0 0 15.84-36.72m-50.928 29.688a29.688 29.688 0 0 1-.072-59.376h.072a29.688 29.688 0 0 1 0 59.376"})]}),(0,g.jsx)("path",{"data-name":"Rect\\xE1ngulo 2157",fill:"none",d:"M0 0h256v256H0z"})]}))},b=(0,a.Z)((function(e){return(0,i.Z)({certificateIcon:{float:"left",paddingTop:"5px !important",paddingRight:"10px !important"},certificateInfo:{float:"right"},certificateWrapper:{height:"auto",margin:5,border:"1px solid #E2E2E2",userSelect:"text",borderRadius:4,"& h6":{fontWeight:"bold"},"& div":{padding:0}},certificateExpiry:{color:"#616161",display:"flex",alignItems:"center",flexWrap:"wrap",marginBottom:5,"& .label":{fontWeight:"bold"}},certificateDomains:{color:"#616161","& .label":{fontWeight:"bold"}},certificatesList:{border:"1px solid #E2E2E2",borderRadius:4,color:"#616161",textTransform:"lowercase",overflowY:"scroll",maxHeight:145,marginBottom:10},certificatesListItem:{padding:"0px 16px",borderBottom:"1px solid #E2E2E2","& div":{minWidth:0},"& svg":{fontSize:12,marginRight:10,opacity:.5},"& span":{fontSize:12}}})}))((function(e){var t=e.classes,n=e.certificateInfo,i=e.onDelete,a=void 0===i?function(){}:i,Z=n.domains||[];return(0,g.jsx)(c.Z,{variant:"outlined",color:"primary",className:t.certificateWrapper,label:(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(o.ZP,{item:!0,xs:1,className:t.certificateIcon,children:(0,g.jsx)(C,{})}),(0,g.jsxs)(o.ZP,{item:!0,xs:11,className:t.certificateInfo,children:[(0,g.jsx)(l.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:n.name}),(0,g.jsxs)(d.Z,{className:t.certificateExpiry,children:[(0,g.jsx)(p.Z,{color:"inherit",fontSize:"small"}),"\xa0",(0,g.jsx)("span",{className:"label",children:"Expiry:\xa0"}),(0,g.jsx)("span",{children:(0,g.jsx)(j(),{format:"YYYY/MM/DD",children:n.expiry})})]}),(0,g.jsx)(u.Z,{}),(0,g.jsx)("br",{}),(0,g.jsx)(d.Z,{className:t.certificateDomains,children:(0,g.jsx)("span",{className:"label",children:"".concat(Z.length," Domain (s):")})}),(0,g.jsx)(m.Z,{className:t.certificatesList,children:Z.map((function(e){return(0,g.jsxs)(f.ZP,{className:t.certificatesListItem,children:[(0,g.jsx)(x.Z,{children:(0,g.jsx)(r.Z,{})}),(0,g.jsx)(h.Z,{primary:e})]})}))})]})]}),onDelete:a},n.name)}))},12684:function(e,t,n){n.r(t);var i=n(4942),a=n(93433),r=n(29439),c=n(1413),s=n(72791),o=n(60364),l=n(51691),d=n(36151),u=n(11135),m=n(25787),f=n(61889),x=n(23814),h=n(81551),p=n(3923),Z=n(87995),j=n(37516),v=n(54639),g=n(81207),C=n(2148),b=n(72401),y=n(98952),k=n(50896),I=n(80184),w=(0,o.$j)((function(e){return{loadingTenant:e.tenants.loadingTenant,selectedTenant:e.tenants.currentTenant,tenant:e.tenants.tenantInfo}}),null);t.default=(0,m.Z)((function(e){return(0,u.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({},x.oZ),x.bK),{},{loaderAlign:{textAlign:"center"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},(0,x.Bz)(e.spacing(4))),x.QV),x.DF),x.oO),x.AK))}))(w((function(e){var t=e.classes,n=(0,h.TL)(),u=(0,o.v9)((function(e){return e.tenants.tenantInfo})),m=(0,o.v9)((function(e){return e.tenants.loadingTenant})),x=(0,s.useState)(!1),w=(0,r.Z)(x,2),P=w[0],S=w[1],A=(0,s.useState)(!1),N=(0,r.Z)(A,2),T=N[0],B=N[1],E=(0,s.useState)(!1),R=(0,r.Z)(E,2),_=R[0],D=R[1],F=(0,s.useState)(!1),L=(0,r.Z)(F,2),M=L[0],W=L[1],z=(0,s.useState)([]),O=(0,r.Z)(z,2),H=O[0],Y=O[1],K=(0,s.useState)([]),q=(0,r.Z)(K,2),G=q[0],V=q[1],Q=(0,s.useState)([]),U=(0,r.Z)(Q,2),$=U[0],J=U[1],X=(0,s.useState)([]),ee=(0,r.Z)(X,2),te=ee[0],ne=ee[1],ie=(0,s.useState)([]),ae=(0,r.Z)(ie,2),re=ae[0],ce=ae[1],se=(0,s.useCallback)((function(){g.Z.invoke("GET","/api/v1/namespaces/".concat(null===u||void 0===u?void 0:u.namespace,"/tenants/").concat(null===u||void 0===u?void 0:u.name,"/security")).then((function(e){D(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&W(!0),ne(e.customCertificates.minio||[]),ce(e.customCertificates.minioCAs||[])})).catch((function(e){n((0,Z.Ih)(e))}))}),[u,n]);(0,s.useEffect)((function(){u&&se()}),[u,se]);var oe=function(e){Y([].concat((0,a.Z)(H),[e.name]));var t=te.filter((function(t){return t.name!==e.name})),n=re.filter((function(t){return t.name!==e.name}));ne(t),ce(n)},le=function(e,t,n,a,r){var s=G,o=function(){};switch(e){case"minio":s=G,o=V;break;case"minioCAs":s=$,o=J}o(s.map((function(e){var s;return e.id===t?(0,c.Z)((0,c.Z)({},e),{},(s={},(0,i.Z)(s,n,a),(0,i.Z)(s,"encoded_".concat(n),r),s)):e})))},de=function(e,t){var n=G,i=function(){};switch(e){case"minio":n=G,i=V;break;case"minioCAs":n=$,i=J}n.length>1&&i(n.filter((function(e){return e.id!==t})))},ue=function(e){var t=G,n=function(){};switch(e){case"minio":t=G,n=V;break;case"minioCAs":t=$,n=J}n([].concat((0,a.Z)(t),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return(0,I.jsxs)(s.Fragment,{children:[(0,I.jsx)(C.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,I.jsx)(p.EjK,{}),isLoading:P,onClose:function(){return B(!1)},isOpen:T,onConfirm:function(){S(!0);var e={autoCert:_,customCertificates:{}};e.customCertificates=M?{secretsToBeDeleted:H,minio:G.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:$.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat((0,a.Z)(te.map((function(e){return e.name}))),(0,a.Z)(re.map((function(e){return e.name})))),minio:[],minioCAs:[]},g.Z.invoke("POST","/api/v1/namespaces/".concat(null===u||void 0===u?void 0:u.namespace,"/tenants/").concat(null===u||void 0===u?void 0:u.name,"/security"),e).then((function(){S(!1),B(!1),V([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),J([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),se()})).catch((function(e){n((0,Z.Ih)(e)),S(!1)}))},confirmationContent:(0,I.jsx)(l.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),m?(0,I.jsx)("div",{className:t.loaderAlign,children:(0,I.jsx)(b.Z,{})}):(0,I.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,I.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,I.jsx)("h1",{className:t.sectionTitle,children:"Security"}),(0,I.jsx)("hr",{className:t.hrClass})]}),(0,I.jsx)(f.ZP,{item:!0,xs:12,children:(0,I.jsx)(j.Z,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:_,onChange:function(e){var t=e.target.checked;D(t)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"})}),(0,I.jsx)(f.ZP,{item:!0,xs:12,children:(0,I.jsx)(j.Z,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:M,onChange:function(e){var t=e.target.checked;W(t)},label:"Custom Certificates",description:"Certificates used to terminated TLS at MinIO"})}),M&&(0,I.jsxs)(s.Fragment,{children:[(0,I.jsx)(f.ZP,{item:!0,xs:12,children:(0,I.jsx)(k.Z,{children:"MinIO Certificates"})}),(0,I.jsx)(f.ZP,{item:!0,xs:12,children:te.map((function(e){return(0,I.jsx)(y.Z,{certificateInfo:e,onDelete:function(){return oe(e)}})}))}),(0,I.jsx)(f.ZP,{item:!0,xs:12,children:G.map((function(e){return(0,I.jsxs)(f.ZP,{container:!0,alignItems:"center",style:{borderBottom:"1px solid #eaeaea"},children:[(0,I.jsx)(f.ZP,{item:!0,xs:5,children:(0,I.jsx)(v.Z,{onChange:function(t,n){return le("minio",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,I.jsx)(f.ZP,{item:!0,xs:5,children:(0,I.jsx)(v.Z,{onChange:function(t,n){return le("minio",e.id,"key",n,t)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})}),(0,I.jsx)(f.ZP,{item:!0,xs:2,children:(0,I.jsx)(d.Z,{variant:"outlined",color:"secondary",onClick:function(){return de("minio",e.id)},children:"Remove"})})]},e.id)}))}),(0,I.jsx)(f.ZP,{item:!0,xs:12,textAlign:"right",children:(0,I.jsx)(d.Z,{variant:"outlined",color:"primary",endIcon:(0,I.jsx)(p.dtP,{}),onClick:function(){return ue("minio")},children:"Add Certificate"})}),(0,I.jsx)(f.ZP,{item:!0,xs:12,children:(0,I.jsx)(k.Z,{children:"MinIO CA Certificates"})}),(0,I.jsx)(f.ZP,{item:!0,xs:12,children:re.map((function(e){return(0,I.jsx)(y.Z,{certificateInfo:e,onDelete:function(){return oe(e)}})}))}),(0,I.jsx)(f.ZP,{item:!0,xs:12,children:$.map((function(e){return(0,I.jsxs)(f.ZP,{container:!0,style:{borderBottom:"1px solid #eaeaea"},alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(f.ZP,{item:!0,xs:5,className:t.fileItem,children:(0,I.jsx)(v.Z,{onChange:function(t,n){return le("minioCAs",e.id,"cert",n,t)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,I.jsx)(f.ZP,{item:!0,xs:2,children:(0,I.jsx)(d.Z,{variant:"outlined",color:"secondary",onClick:function(){return de("minioCAs",e.id)},children:"Remove"})})]},e.id)}))}),(0,I.jsx)(f.ZP,{item:!0,xs:12,textAlign:"right",children:(0,I.jsx)(d.Z,{variant:"outlined",color:"primary",endIcon:(0,I.jsx)(p.dtP,{}),onClick:function(){return ue("minioCAs")},children:"Add CA Certificate"})})]}),(0,I.jsx)(f.ZP,{item:!0,xs:12,textAlign:"right",children:(0,I.jsx)(d.Z,{type:"submit",variant:"contained",color:"primary",disabled:T||P,onClick:function(){return B(!0)},children:"Save"})})]})]})})))},22512:function(e,t,n){var i=n(72791),a=n(20890),r=n(11135),c=n(25787),s=n(80184);t.Z=(0,c.Z)((function(e){var t;return(0,r.Z)({errorBlock:{color:(null===(t=e.palette)||void 0===t?void 0:t.error.main)||"#C83B51"}})}))((function(e){var t=e.classes,n=e.errorMessage,r=e.withBreak,c=void 0===r||r;return(0,s.jsxs)(i.Fragment,{children:[c&&(0,s.jsx)("br",{}),(0,s.jsx)(a.Z,{component:"p",variant:"body1",className:t.errorBlock,children:n})]})}))}}]);
//# sourceMappingURL=2684.0cd690ab.chunk.js.map