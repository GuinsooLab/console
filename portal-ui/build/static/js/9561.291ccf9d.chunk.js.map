{"version":3,"file":"static/js/9561.291ccf9d.chunk.js","mappings":"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","sources":["common/HelpBox.tsx","screens/Console/Configurations/SiteReplication/AddReplicationSites.tsx"],"sourcesContent":["// This file is part of GuinsooLab Console Server\n// Copyright (c) 2020-2022 GuinsooLab, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport Grid from \"@mui/material/Grid\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      border: \"1px solid #E2E2E2\",\n      borderRadius: 2,\n      backgroundColor: \"#FBFAFA\",\n      paddingLeft: 25,\n      paddingTop: 31,\n      paddingBottom: 21,\n      paddingRight: 30,\n    },\n    leftItems: {\n      fontSize: 16,\n      fontWeight: \"bold\",\n      marginBottom: 15,\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& .min-icon\": {\n        marginRight: 15,\n        height: 28,\n        width: 38,\n      },\n    },\n    helpText: {\n      fontSize: 16,\n      paddingLeft: 5,\n    },\n  });\n\ninterface IHelpBox {\n  classes: any;\n  iconComponent: any;\n  title: string;\n  help: any;\n}\n\nconst HelpBox = ({ classes, iconComponent, title, help }: IHelpBox) => {\n  return (\n    <div className={classes.root}>\n      <Grid container>\n        <Grid item xs={12} className={classes.leftItems}>\n          {iconComponent}\n          {title}\n        </Grid>\n        <Grid item xs={12} className={classes.helpText}>\n          {help}\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(HelpBox);\n","// This file is part of GuinsooLab Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport { Box, Button, LinearProgress } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport RBIconButton from \"../../Buckets/BucketDetails/SummaryItems/RBIconButton\";\nimport useApi from \"../../Common/Hooks/useApi\";\nimport { AddIcon, ClustersIcon, RemoveIcon } from \"../../../../icons\";\nimport InputBoxWrapper from \"../../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport PageHeader from \"../../Common/PageHeader/PageHeader\";\nimport BackLink from \"../../../../common/BackLink\";\nimport { IAM_PAGES } from \"../../../../common/SecureComponent/permissions\";\nimport PageLayout from \"../../Common/Layout/PageLayout\";\nimport HelpBox from \"../../../../common/HelpBox\";\nimport SectionTitle from \"../../Common/SectionTitle\";\nimport {\n  setErrorSnackMessage,\n  setSnackBarMessage,\n} from \"../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../store\";\n\ntype SiteInputRow = {\n  name: string;\n  endpoint: string;\n};\n\nconst isValidEndPoint = (ep: string) => {\n  let isValidEndPointUrl = false;\n\n  try {\n    new URL(ep);\n    isValidEndPointUrl = true;\n  } catch (err) {\n    isValidEndPointUrl = false;\n  }\n  if (isValidEndPointUrl || ep === \"\") {\n    return \"\";\n  } else {\n    return \"Invalid Endpoint\";\n  }\n};\nconst AddReplicationSites = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const [existingSites, setExistingSites] = useState<SiteInputRow[]>([]);\n\n  const [accessKey, setAccessKey] = useState<string>(\"\");\n  const [secretKey, setSecretKey] = useState<string>(\"\");\n  const [siteConfig, setSiteConfig] = useState<SiteInputRow[]>([]);\n\n  const setDefaultNewRows = () => {\n    const defaultNewSites = existingSites?.length\n      ? [{ endpoint: \"\", name: \"\" }]\n      : [\n          { endpoint: \"\", name: \"\" },\n          { endpoint: \"\", name: \"\" },\n        ];\n    setSiteConfig(defaultNewSites);\n  };\n\n  const [isSiteInfoLoading, invokeSiteInfoApi] = useApi(\n    (res: any) => {\n      const { sites: siteList, name: curSiteName } = res;\n      // current site name to be the fist one.\n      const foundIdx = siteList.findIndex((el: any) => el.name === curSiteName);\n      if (foundIdx !== -1) {\n        let curSite = siteList[foundIdx];\n        curSite = {\n          ...curSite,\n          isCurrent: true,\n        };\n        siteList.splice(foundIdx, 1, curSite);\n      }\n\n      siteList.sort((x: any, y: any) => {\n        return x.name === curSiteName ? -1 : y.name === curSiteName ? 1 : 0;\n      });\n      setExistingSites(siteList);\n    },\n    (err: any) => {\n      setExistingSites([]);\n    }\n  );\n\n  const getSites = () => {\n    invokeSiteInfoApi(\"GET\", `api/v1/admin/site-replication`);\n  };\n\n  useEffect(() => {\n    getSites();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    setDefaultNewRows();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [existingSites]);\n\n  const isAllEndpointsValid =\n    siteConfig.reduce((acc: string[], cv, i) => {\n      const epValue = siteConfig[i].endpoint;\n      const isEpValid = isValidEndPoint(epValue);\n\n      if (isEpValid === \"\" && epValue !== \"\") {\n        acc.push(isEpValid);\n      }\n      return acc;\n    }, []).length === siteConfig.length;\n\n  const [isAdding, invokeSiteAddApi] = useApi(\n    (res: any) => {\n      if (res.success) {\n        dispatch(setSnackBarMessage(res.status));\n        resetForm();\n        getSites();\n        navigate(IAM_PAGES.SITE_REPLICATION);\n      } else {\n        dispatch(\n          setErrorSnackMessage({\n            errorMessage: \"Error\",\n            detailedError: res.status,\n          })\n        );\n      }\n    },\n    (err: any) => {\n      dispatch(setErrorSnackMessage(err));\n    }\n  );\n\n  const resetForm = () => {\n    setAccessKey(\"\");\n    setSecretKey(\"\");\n    setDefaultNewRows();\n  };\n\n  const addSiteReplication = () => {\n    const existingSitesToAdd = existingSites?.map((es, idx) => {\n      return {\n        accessKey: accessKey,\n        secretKey: secretKey,\n        name: es.name,\n        endpoint: es.endpoint,\n      };\n    });\n\n    const newSitesToAdd = siteConfig.reduce((acc: any, ns, idx) => {\n      if (ns.endpoint) {\n        acc.push({\n          accessKey: accessKey,\n          secretKey: secretKey,\n          name: ns.name || `dr-site-${idx}`,\n          endpoint: ns.endpoint,\n        });\n      }\n      return acc;\n    }, []);\n\n    invokeSiteAddApi(\"POST\", `api/v1/admin/site-replication`, [\n      ...(existingSitesToAdd || []),\n      ...(newSitesToAdd || []),\n    ]);\n  };\n\n  return (\n    <Fragment>\n      <PageHeader\n        label={\n          <BackLink\n            to={IAM_PAGES.SITE_REPLICATION}\n            label={\"Add Replication Site\"}\n          />\n        }\n      />\n      <PageLayout>\n        <Box\n          sx={{\n            display: \"grid\",\n            padding: \"25px\",\n            gap: \"25px\",\n            gridTemplateColumns: {\n              md: \"2fr 1.2fr\",\n              xs: \"1fr\",\n            },\n            border: \"1px solid #eaeaea\",\n          }}\n        >\n          <Box>\n            <SectionTitle icon={<ClustersIcon />}>\n              Add Sites for Replication\n            </SectionTitle>\n\n            {isSiteInfoLoading || isAdding ? <LinearProgress /> : null}\n            <form\n              noValidate\n              autoComplete=\"off\"\n              onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n                e.preventDefault();\n                return addSiteReplication();\n              }}\n            >\n              <Grid item xs={12} marginBottom={\"15px\"}>\n                <Box\n                  sx={{\n                    fontStyle: \"italic\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    fontSize: \"12px\",\n                    marginTop: 2,\n                  }}\n                >\n                  <Box sx={{ fontWeight: 600 }}>Note:</Box>{\" \"}\n                  <Box sx={{ marginLeft: 1 }}>\n                    Access Key and Secret Key should be same on all sites.\n                  </Box>\n                </Box>\n              </Grid>\n              <Grid\n                item\n                xs={12}\n                marginBottom={\"15px\"}\n                sx={{\n                  \"& label span\": {\n                    fontWeight: \"normal\",\n                  },\n                }}\n              >\n                <InputBoxWrapper\n                  id=\"add-rep-peer-accKey\"\n                  name=\"add-rep-peer-accKey\"\n                  onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                    setAccessKey(event.target.value);\n                  }}\n                  label=\"Access Key\"\n                  required={true}\n                  value={accessKey}\n                  error={accessKey === \"\" ? \"Access Key is required.\" : \"\"}\n                  data-test-id={\"add-site-rep-acc-key\"}\n                />\n              </Grid>\n              <Grid\n                item\n                xs={12}\n                marginBottom={\"30px\"}\n                sx={{\n                  \"& label span\": {\n                    fontWeight: \"normal\",\n                  },\n                }}\n              >\n                <InputBoxWrapper\n                  id=\"add-rep-peer-secKey\"\n                  name=\"add-rep-peer-secKey\"\n                  type={\"password\"}\n                  required={true}\n                  onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                    setSecretKey(event.target.value);\n                  }}\n                  error={secretKey === \"\" ? \"Secret Key is required.\" : \"\"}\n                  label=\"Secret Key\"\n                  value={secretKey}\n                  data-test-id={\"add-site-rep-sec-key\"}\n                />\n              </Grid>\n\n              <Grid item xs={12}>\n                <Box\n                  sx={{\n                    marginBottom: \"15px\",\n                    fontSize: \"14px\",\n                    fontWeight: 600,\n                  }}\n                >\n                  Peer Sites\n                </Box>\n              </Grid>\n\n              <Box\n                sx={{\n                  display: \"grid\",\n                  gridTemplateColumns: \".8fr 1.2fr .2fr\",\n                  border: \"1px solid #eaeaea\",\n                  padding: \"15px\",\n                  gap: \"10px\",\n                  maxHeight: \"430px\",\n                  overflowY: \"auto\",\n                }}\n              >\n                <Box\n                  sx={{\n                    fontSize: \"14px\",\n                    marginLeft: \"5px\",\n                  }}\n                >\n                  Site Name\n                </Box>\n                <Box sx={{ fontSize: \"14px\", marginLeft: \"5px\" }}>\n                  Endpoint {\"*\"}\n                </Box>\n                <Box> </Box>\n                {existingSites?.map((si, index) => {\n                  return (\n                    <Fragment key={si.name}>\n                      <Box>\n                        <InputBoxWrapper\n                          id={`add-rep-ex-peer-site-${index}`}\n                          name={`add-rep-ex-peer-site-${index}`}\n                          extraInputProps={{\n                            readOnly: true,\n                          }}\n                          label=\"\"\n                          value={si.name}\n                          onChange={() => {}}\n                        />\n                      </Box>\n                      <Box>\n                        <InputBoxWrapper\n                          id={`add-rep-ex-peer-site-ep-${index}`}\n                          name={`add-rep-ex-peer-site-ep-${index}`}\n                          extraInputProps={{\n                            readOnly: true,\n                          }}\n                          label=\"\"\n                          value={si.endpoint}\n                          onChange={() => {}}\n                        />\n                      </Box>\n                      <Grid item xs={12}>\n                        {\" \"}\n                      </Grid>\n                    </Fragment>\n                  );\n                })}\n\n                {siteConfig.map((sci, index) => {\n                  let isDelDisabled = false;\n\n                  if (existingSites?.length && index === 0) {\n                    isDelDisabled = true;\n                  } else if (!existingSites?.length && index < 2) {\n                    isDelDisabled = true;\n                  }\n\n                  return (\n                    <Fragment key={`${index}`}>\n                      <Box>\n                        <InputBoxWrapper\n                          id={`add-rep-peer-site-${index}`}\n                          name={`add-rep-peer-site-${index}`}\n                          placeholder={`dr-site-${index}`}\n                          label=\"\"\n                          value={`${sci.name}`}\n                          onChange={(e) => {\n                            const nameTxt = e.target.value;\n                            setSiteConfig((prevItems) => {\n                              return prevItems.map((item, ix) =>\n                                ix === index ? { ...item, name: nameTxt } : item\n                              );\n                            });\n                          }}\n                          data-test-id={`add-site-rep-peer-site-${index}`}\n                        />\n                      </Box>\n                      <Box>\n                        <InputBoxWrapper\n                          id={`add-rep-peer-site-ep-${index}`}\n                          name={`add-rep-peer-site-ep-${index}`}\n                          placeholder={`https://dr.minio-storage:900${index}`}\n                          label=\"\"\n                          error={isValidEndPoint(siteConfig[index].endpoint)}\n                          value={`${sci.endpoint}`}\n                          onChange={(e) => {\n                            const epTxt = e.target.value;\n                            setSiteConfig((prevItems) => {\n                              return prevItems.map((item, ix) =>\n                                ix === index\n                                  ? { ...item, endpoint: epTxt }\n                                  : item\n                              );\n                            });\n                          }}\n                          data-test-id={`add-site-rep-peer-ep-${index}`}\n                        />\n                      </Box>\n                      <Grid item xs={12} alignItems={\"center\"} display={\"flex\"}>\n                        <Box\n                          sx={{\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            justifyContent: \"center\",\n                            alignSelf: \"baseline\",\n                            marginTop: \"4px\",\n\n                            \"& button\": {\n                              borderColor: \"#696969\",\n                              color: \"#696969\",\n                              borderRadius: \"50%\",\n                            },\n                          }}\n                        >\n                          <RBIconButton\n                            tooltip={\"Add a Row\"}\n                            text={\"\"}\n                            variant=\"outlined\"\n                            color=\"primary\"\n                            icon={<AddIcon />}\n                            onClick={(e) => {\n                              e.preventDefault();\n                              const newRows = [...siteConfig];\n                              //add at the next index\n                              newRows.splice(index + 1, 0, {\n                                name: \"\",\n                                endpoint: \"\",\n                              });\n\n                              setSiteConfig(newRows);\n                            }}\n                          />\n                          <RBIconButton\n                            tooltip={\"Remove Row\"}\n                            text={\"\"}\n                            variant=\"outlined\"\n                            disabled={isDelDisabled}\n                            color=\"primary\"\n                            icon={<RemoveIcon />}\n                            onClick={(e) => {\n                              e.preventDefault();\n                              setSiteConfig(\n                                siteConfig.filter((_, idx) => idx !== index)\n                              );\n                            }}\n                          />\n                        </Box>\n                      </Grid>\n                    </Fragment>\n                  );\n                })}\n              </Box>\n\n              <Grid item xs={12}>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"flex-end\",\n                    marginTop: \"20px\",\n                    gap: \"15px\",\n                  }}\n                >\n                  <Button\n                    type=\"button\"\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    disabled={isAdding}\n                    onClick={resetForm}\n                  >\n                    Clear\n                  </Button>\n\n                  <Button\n                    type=\"submit\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={\n                      isAdding ||\n                      !accessKey ||\n                      !secretKey ||\n                      !isAllEndpointsValid\n                    }\n                  >\n                    Save\n                  </Button>\n                </Box>\n              </Grid>\n            </form>\n          </Box>\n\n          <HelpBox\n            title={\"\"}\n            iconComponent={null}\n            help={\n              <Fragment>\n                <Box\n                  sx={{\n                    marginTop: \"-25px\",\n                    fontSize: \"16px\",\n                    fontWeight: 600,\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"flex-start\",\n                    padding: \"2px\",\n                  }}\n                >\n                  <Box\n                    sx={{\n                      backgroundColor: \"#07193E\",\n                      height: \"15px\",\n                      width: \"15px\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      borderRadius: \"50%\",\n                      marginRight: \"18px\",\n                      padding: \"3px\",\n                      paddingLeft: \"2px\",\n                      \"& .min-icon\": {\n                        height: \"11px\",\n                        width: \"11px\",\n                        fill: \"#ffffff\",\n                      },\n                    }}\n                  >\n                    <ClustersIcon />\n                  </Box>\n                  About Site Replication\n                </Box>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    flexFlow: \"column\",\n                    fontSize: \"14px\",\n                    flex: \"2\",\n                    \"& .step-number\": {\n                      color: \"#ffffff\",\n                      height: \"25px\",\n                      width: \"25px\",\n                      background: \"#081C42\",\n                      marginRight: \"10px\",\n                      textAlign: \"center\",\n                      fontWeight: 600,\n                      borderRadius: \"50%\",\n                    },\n\n                    \"& .step-row\": {\n                      fontSize: \"14px\",\n                      display: \"flex\",\n                      marginTop: \"15px\",\n                      marginBottom: \"15px\",\n\n                      \"&.step-text\": {\n                        fontWeight: 400,\n                      },\n                      \"&:before\": {\n                        content: \"' '\",\n                        height: \"7px\",\n                        width: \"7px\",\n                        backgroundColor: \"#2781B0\",\n                        marginRight: \"10px\",\n                        marginTop: \"12px\",\n                        flexShrink: 0,\n                      },\n                    },\n                  }}\n                >\n                  <Box>\n                    The following changes are replicated to all other sites\n                  </Box>\n                  <ul>\n                    <li>Creation and deletion of buckets and objects</li>\n                    <li>\n                      Creation and deletion of all IAM users, groups, policies\n                      and their mappings to users or groups\n                    </li>\n                    <li>Creation of STS credentials</li>\n                    <li>\n                      Creation and deletion of service accounts (except those\n                      owned by the root user)\n                    </li>\n                    <li>\n                      Changes to Bucket features such as\n                      <ul>\n                        <li>Bucket Policies</li>\n                        <li>Bucket Tags</li>\n                        <li>Bucket Object-Lock configurations</li>\n                        <li>Bucket Encryption configuration</li>\n                      </ul>\n                    </li>\n\n                    <li>\n                      The following Bucket features will NOT be replicated\n                      <ul>\n                        <li>Bucket notification configuration</li>\n                        <li>Bucket lifecycle (ILM) configuration</li>\n                      </ul>\n                    </li>\n                  </ul>\n                </Box>\n              </Fragment>\n            }\n          />\n        </Box>\n      </PageLayout>\n    </Fragment>\n  );\n};\n\nexport default AddReplicationSites;\n"],"names":["withStyles","theme","createStyles","root","border","borderRadius","backgroundColor","paddingLeft","paddingTop","paddingBottom","paddingRight","leftItems","fontSize","fontWeight","marginBottom","display","alignItems","marginRight","height","width","helpText","classes","iconComponent","title","help","className","container","item","xs","isValidEndPoint","ep","isValidEndPointUrl","URL","err","dispatch","useAppDispatch","navigate","useNavigate","useState","existingSites","setExistingSites","accessKey","setAccessKey","secretKey","setSecretKey","siteConfig","setSiteConfig","setDefaultNewRows","defaultNewSites","length","endpoint","name","useApi","res","siteList","sites","curSiteName","foundIdx","findIndex","el","curSite","isCurrent","splice","sort","x","y","isSiteInfoLoading","invokeSiteInfoApi","getSites","useEffect","isAllEndpointsValid","reduce","acc","cv","i","epValue","isEpValid","push","success","setSnackBarMessage","status","resetForm","IAM_PAGES","setErrorSnackMessage","errorMessage","detailedError","isAdding","invokeSiteAddApi","Fragment","label","to","sx","padding","gap","gridTemplateColumns","md","icon","noValidate","autoComplete","onSubmit","e","preventDefault","existingSitesToAdd","map","es","idx","newSitesToAdd","ns","addSiteReplication","fontStyle","marginTop","marginLeft","id","onChange","event","target","value","required","error","type","maxHeight","overflowY","si","index","extraInputProps","readOnly","sci","isDelDisabled","placeholder","nameTxt","prevItems","ix","epTxt","justifyContent","alignSelf","borderColor","color","tooltip","text","variant","onClick","newRows","disabled","filter","_","fill","flexFlow","flex","background","textAlign","content","flexShrink"],"sourceRoot":""}